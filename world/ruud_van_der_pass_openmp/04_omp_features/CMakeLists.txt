cmake_minimum_required(VERSION 3.2)


find_package(OpenMP REQUIRED)

# there is no OpenMP_CXX_LIBRARIES only OpenMP_CXX_FLAGS
# you may think only compiler needs it, but NO, the linker wants it also.

set (CMAKE_C_FLAGS_2     ${CMAKE_C_FLAGS})
set (CMAKE_CXX_FLAGS_2   ${CMAKE_CXX_FLAGS})

if(OPENMP_FOUND)
  set (CMAKE_C_FLAGS    "${CMAKE_C_FLAGS}    ${OpenMP_C_FLAGS}")
  set (CMAKE_CXX_FLAGS  "${CMAKE_CXX_FLAGS}  ${OpenMP_CXX_FLAGS}")
endif()


add_executable(01_parallel_block      01_parallel_block.cpp)
add_executable(01_parallel_book       01_parallel_book.cpp)
add_executable(01_parallel_branching_illegal 01_parallel_branching_illegal.cpp)
add_executable(01_parallel_throw_restriction 01_parallel_throw_restriction.cpp)
add_executable(01_parallel_throw_illegal     01_parallel_throw_illegal.cpp)
add_executable(02_loop                       02_loop.cpp)
add_executable(02_loop_list_invalid          02_loop_list_invalid.cpp)
add_executable(02_loop_map                   02_loop_map.cpp)
add_executable(02_loop_set                   02_loop_set.cpp)
add_executable(02_loop_vector                02_loop_vector.cpp)
add_executable(03_sections_intro             03_sections_intro.cpp)
add_executable(03_sections_ind               03_sections_ind.cpp)
add_executable(04_single_book                04_single_book.cpp)
add_executable(04_single_init                04_single_init.cpp)
add_executable(05_shared                     05_shared.cpp)
add_executable(06_private                    06_private.cpp)
add_executable(07_lastprivate                07_lastprivate.cpp)
add_executable(07_lastprivate_with_a_shared  07_lastprivate_with_a_shared.cpp)
add_executable(08_firstprivate               08_firstprivate.cpp)
add_executable(09_default_none               09_default_none.cpp)
add_executable(09_default_shared             09_default_shared.cpp)
add_executable(10_nowait                     10_nowait.cpp)
add_executable(10_nowait_sections            10_nowait_sections.cpp)
add_executable(11_schedule_static            11_schedule_static.cpp)
add_executable(11_schedule_dynamic           11_schedule_dynamic.cpp)
add_executable(11_schedule_guided            11_schedule_guided.cpp)
add_executable(11_schedule_runtime           11_schedule_runtime.cpp)
add_executable(11_schedule_static_chunk      11_schedule_static_chunk.cpp)
add_executable(11_schedule_dynamic_chunk     11_schedule_dynamic_chunk.cpp)
add_executable(11_schedule_guided_chunk      11_schedule_guided_chunk.cpp)
add_executable(12_barrier                    12_barrier.cpp)
add_executable(13_ordered                    13_ordered.cpp)
add_executable(14_critical                   14_critical.cpp)
add_executable(15_atomic                     15_atomic.cpp)
add_executable(15_atomic_with_func           15_atomic_with_func.cpp)
add_executable(16_locks                      16_locks.cpp)
add_executable(16_locks_nested               16_locks_nested.cpp)
add_executable(17_master                     17_master.cpp)
add_executable(18_if                         18_if.cpp)
add_executable(19_num_threads                19_num_threads.cpp)
add_executable(20_ordered                    20_ordered.cpp)
add_executable(21_reduction                  21_reduction.cpp)
add_executable(22_copyin                     22_copyin.cpp)
add_executable(23_copyprivate                23_copyprivate.cpp)
